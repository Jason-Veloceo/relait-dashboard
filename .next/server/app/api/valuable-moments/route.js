"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/valuable-moments/route";
exports.ids = ["app/api/valuable-moments/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluable-moments%2Froute&page=%2Fapi%2Fvaluable-moments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluable-moments%2Froute.ts&appDir=%2FUsers%2Fjason%2FDocuments%2FProjects%2FRelait-Dashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjason%2FDocuments%2FProjects%2FRelait-Dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluable-moments%2Froute&page=%2Fapi%2Fvaluable-moments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluable-moments%2Froute.ts&appDir=%2FUsers%2Fjason%2FDocuments%2FProjects%2FRelait-Dashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjason%2FDocuments%2FProjects%2FRelait-Dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_jason_Documents_Projects_Relait_Dashboard_src_app_api_valuable_moments_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/valuable-moments/route.ts */ \"(rsc)/./src/app/api/valuable-moments/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/valuable-moments/route\",\n        pathname: \"/api/valuable-moments\",\n        filename: \"route\",\n        bundlePath: \"app/api/valuable-moments/route\"\n    },\n    resolvedPagePath: \"/Users/jason/Documents/Projects/Relait-Dashboard/src/app/api/valuable-moments/route.ts\",\n    nextConfigOutput,\n    userland: _Users_jason_Documents_Projects_Relait_Dashboard_src_app_api_valuable_moments_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/valuable-moments/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2YWx1YWJsZS1tb21lbnRzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZ2YWx1YWJsZS1tb21lbnRzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGdmFsdWFibGUtbW9tZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmphc29uJTJGRG9jdW1lbnRzJTJGUHJvamVjdHMlMkZSZWxhaXQtRGFzaGJvYXJkJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmphc29uJTJGRG9jdW1lbnRzJTJGUHJvamVjdHMlMkZSZWxhaXQtRGFzaGJvYXJkJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNzQztBQUNuSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3RlbXBsYXRlLTIvPzM1MGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2phc29uL0RvY3VtZW50cy9Qcm9qZWN0cy9SZWxhaXQtRGFzaGJvYXJkL3NyYy9hcHAvYXBpL3ZhbHVhYmxlLW1vbWVudHMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3ZhbHVhYmxlLW1vbWVudHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS92YWx1YWJsZS1tb21lbnRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS92YWx1YWJsZS1tb21lbnRzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2phc29uL0RvY3VtZW50cy9Qcm9qZWN0cy9SZWxhaXQtRGFzaGJvYXJkL3NyYy9hcHAvYXBpL3ZhbHVhYmxlLW1vbWVudHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3ZhbHVhYmxlLW1vbWVudHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluable-moments%2Froute&page=%2Fapi%2Fvaluable-moments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluable-moments%2Froute.ts&appDir=%2FUsers%2Fjason%2FDocuments%2FProjects%2FRelait-Dashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjason%2FDocuments%2FProjects%2FRelait-Dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/valuable-moments/route.ts":
/*!***********************************************!*\
  !*** ./src/app/api/valuable-moments/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_queries_valuable_moments__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/queries/valuable-moments */ \"(rsc)/./src/lib/queries/valuable-moments.ts\");\n/* harmony import */ var _barrel_optimize_names_subDays_date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! __barrel_optimize__?names=subDays!=!date-fns */ \"(rsc)/./node_modules/date-fns/subDays.mjs\");\n\n\n\nasync function GET(request) {\n    try {\n        // Get query parameters\n        const url = new URL(request.url);\n        const businessIds = url.searchParams.get(\"businessIds\");\n        const days = parseInt(url.searchParams.get(\"days\") || \"30\");\n        // Parse business IDs\n        const parsedBusinessIds = businessIds ? businessIds.split(\",\").map((id)=>parseInt(id)) : null;\n        // Calculate date range\n        const endDate = new Date();\n        const startDate = (0,_barrel_optimize_names_subDays_date_fns__WEBPACK_IMPORTED_MODULE_2__.subDays)(endDate, days);\n        const metrics = await (0,_lib_queries_valuable_moments__WEBPACK_IMPORTED_MODULE_1__.getAllValuableMoments)(parsedBusinessIds, {\n            startDate,\n            endDate\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: metrics\n        });\n    } catch (error) {\n        console.error(\"Error fetching valuable moments:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS92YWx1YWJsZS1tb21lbnRzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDZTtBQUNwQztBQUU1QixlQUFlRyxJQUFJQyxPQUFvQjtJQUM1QyxJQUFJO1FBQ0YsdUJBQXVCO1FBQ3ZCLE1BQU1DLE1BQU0sSUFBSUMsSUFBSUYsUUFBUUMsR0FBRztRQUMvQixNQUFNRSxjQUFjRixJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQztRQUN6QyxNQUFNQyxPQUFPQyxTQUFTTixJQUFJRyxZQUFZLENBQUNDLEdBQUcsQ0FBQyxXQUFXO1FBRXRELHFCQUFxQjtRQUNyQixNQUFNRyxvQkFBb0JMLGNBQ3RCQSxZQUFZTSxLQUFLLENBQUMsS0FBS0MsR0FBRyxDQUFDQyxDQUFBQSxLQUFNSixTQUFTSSxPQUMxQztRQUVKLHVCQUF1QjtRQUN2QixNQUFNQyxVQUFVLElBQUlDO1FBQ3BCLE1BQU1DLFlBQVloQixnRkFBT0EsQ0FBQ2MsU0FBU047UUFFbkMsTUFBTVMsVUFBVSxNQUFNbEIsb0ZBQXFCQSxDQUFDVyxtQkFBbUI7WUFDN0RNO1lBQ0FGO1FBQ0Y7UUFFQSxPQUFPaEIscURBQVlBLENBQUNvQixJQUFJLENBQUM7WUFBRUMsU0FBUztZQUFNQyxNQUFNSDtRQUFRO0lBQzFELEVBQUUsT0FBT0ksT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsb0NBQW9DQTtRQUNsRCxPQUFPdkIscURBQVlBLENBQUNvQixJQUFJLENBQ3RCO1lBQ0VDLFNBQVM7WUFDVEUsT0FBT0EsaUJBQWlCRSxRQUFRRixNQUFNRyxPQUFPLEdBQUc7UUFDbEQsR0FDQTtZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RlbXBsYXRlLTIvLi9zcmMvYXBwL2FwaS92YWx1YWJsZS1tb21lbnRzL3JvdXRlLnRzPzRlMjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGdldEFsbFZhbHVhYmxlTW9tZW50cyB9IGZyb20gJ0AvbGliL3F1ZXJpZXMvdmFsdWFibGUtbW9tZW50cyc7XG5pbXBvcnQgeyBzdWJEYXlzIH0gZnJvbSAnZGF0ZS1mbnMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBidXNpbmVzc0lkcyA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdidXNpbmVzc0lkcycpO1xuICAgIGNvbnN0IGRheXMgPSBwYXJzZUludCh1cmwuc2VhcmNoUGFyYW1zLmdldCgnZGF5cycpIHx8ICczMCcpO1xuXG4gICAgLy8gUGFyc2UgYnVzaW5lc3MgSURzXG4gICAgY29uc3QgcGFyc2VkQnVzaW5lc3NJZHMgPSBidXNpbmVzc0lkcyBcbiAgICAgID8gYnVzaW5lc3NJZHMuc3BsaXQoJywnKS5tYXAoaWQgPT4gcGFyc2VJbnQoaWQpKVxuICAgICAgOiBudWxsO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGRhdGUgcmFuZ2VcbiAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCBzdGFydERhdGUgPSBzdWJEYXlzKGVuZERhdGUsIGRheXMpO1xuXG4gICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IGdldEFsbFZhbHVhYmxlTW9tZW50cyhwYXJzZWRCdXNpbmVzc0lkcywge1xuICAgICAgc3RhcnREYXRlLFxuICAgICAgZW5kRGF0ZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgZGF0YTogbWV0cmljcyB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB2YWx1YWJsZSBtb21lbnRzOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyBcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRBbGxWYWx1YWJsZU1vbWVudHMiLCJzdWJEYXlzIiwiR0VUIiwicmVxdWVzdCIsInVybCIsIlVSTCIsImJ1c2luZXNzSWRzIiwic2VhcmNoUGFyYW1zIiwiZ2V0IiwiZGF5cyIsInBhcnNlSW50IiwicGFyc2VkQnVzaW5lc3NJZHMiLCJzcGxpdCIsIm1hcCIsImlkIiwiZW5kRGF0ZSIsIkRhdGUiLCJzdGFydERhdGUiLCJtZXRyaWNzIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/valuable-moments/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closePool: () => (/* binding */ closePool),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   initializePool: () => (/* binding */ initializePool),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   switchDatabase: () => (/* binding */ switchDatabase),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_0__);\n\n// Load environment variables\nconst getDbConfig = ()=>{\n    const activeDb = process.env.ACTIVE_DB || \"UAT\";\n    if (activeDb === \"UAT\") {\n        return {\n            host: process.env.UAT_DB_HOST,\n            user: process.env.UAT_DB_USER,\n            password: process.env.UAT_DB_PASSWORD,\n            database: process.env.UAT_DB_DATABASE,\n            port: parseInt(process.env.UAT_DB_PORT || \"5432\"),\n            ssl: {\n                rejectUnauthorized: false\n            }\n        };\n    } else if (activeDb === \"PROD\") {\n        return {\n            host: process.env.DB_HOST,\n            user: process.env.DB_USER,\n            password: process.env.DB_PASSWORD,\n            database: process.env.DB_DATABASE,\n            port: parseInt(process.env.DB_PORT || \"5432\"),\n            ssl: {\n                rejectUnauthorized: false\n            }\n        };\n    }\n    throw new Error(\"Invalid database configuration\");\n};\n// Create a pool that we'll reuse\nlet pool;\n// Initialize or reinitialize the pool with new configuration\nconst initializePool = ()=>{\n    if (pool) {\n        pool.end(); // Close existing connections\n    }\n    pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool(getDbConfig());\n    return pool;\n};\n// Initialize the pool with default configuration\npool = initializePool();\n// Test query to verify connection\nconst testConnection = async ()=>{\n    try {\n        const client = await pool.connect();\n        const result = await client.query(\"SELECT NOW()\");\n        client.release();\n        return {\n            success: true,\n            timestamp: result.rows[0].now\n        };\n    } catch (error) {\n        console.error(\"Database connection error:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Unknown error\"\n        };\n    }\n};\n// Generic query function with type safety\nasync function query(text, params) {\n    try {\n        const result = await pool.query(text, params);\n        return result.rows;\n    } catch (error) {\n        console.error(\"Query error:\", error);\n        throw error;\n    }\n}\n// Function to switch databases\nconst switchDatabase = async (database)=>{\n    process.env.ACTIVE_DB = database;\n    initializePool();\n    return testConnection();\n};\n// Cleanup function for when the application stops\nconst closePool = async ()=>{\n    await pool.end();\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQTBCO0FBRTFCLDZCQUE2QjtBQUM3QixNQUFNQyxjQUFjO0lBQ2xCLE1BQU1DLFdBQVdDLFFBQVFDLEdBQUcsQ0FBQ0MsU0FBUyxJQUFJO0lBRTFDLElBQUlILGFBQWEsT0FBTztRQUN0QixPQUFPO1lBQ0xJLE1BQU1ILFFBQVFDLEdBQUcsQ0FBQ0csV0FBVztZQUM3QkMsTUFBTUwsUUFBUUMsR0FBRyxDQUFDSyxXQUFXO1lBQzdCQyxVQUFVUCxRQUFRQyxHQUFHLENBQUNPLGVBQWU7WUFDckNDLFVBQVVULFFBQVFDLEdBQUcsQ0FBQ1MsZUFBZTtZQUNyQ0MsTUFBTUMsU0FBU1osUUFBUUMsR0FBRyxDQUFDWSxXQUFXLElBQUk7WUFDMUNDLEtBQUs7Z0JBQ0hDLG9CQUFvQjtZQUN0QjtRQUNGO0lBQ0YsT0FBTyxJQUFJaEIsYUFBYSxRQUFRO1FBQzlCLE9BQU87WUFDTEksTUFBTUgsUUFBUUMsR0FBRyxDQUFDZSxPQUFPO1lBQ3pCWCxNQUFNTCxRQUFRQyxHQUFHLENBQUNnQixPQUFPO1lBQ3pCVixVQUFVUCxRQUFRQyxHQUFHLENBQUNpQixXQUFXO1lBQ2pDVCxVQUFVVCxRQUFRQyxHQUFHLENBQUNrQixXQUFXO1lBQ2pDUixNQUFNQyxTQUFTWixRQUFRQyxHQUFHLENBQUNtQixPQUFPLElBQUk7WUFDdENOLEtBQUs7Z0JBQ0hDLG9CQUFvQjtZQUN0QjtRQUNGO0lBQ0Y7SUFFQSxNQUFNLElBQUlNLE1BQU07QUFDbEI7QUFFQSxpQ0FBaUM7QUFDakMsSUFBSUM7QUFFSiw2REFBNkQ7QUFDdEQsTUFBTUMsaUJBQWlCO0lBQzVCLElBQUlELE1BQU07UUFDUkEsS0FBS0UsR0FBRyxJQUFJLDZCQUE2QjtJQUMzQztJQUNBRixPQUFPLElBQUl6QixvQ0FBSUEsQ0FBQ0M7SUFDaEIsT0FBT3dCO0FBQ1QsRUFBRTtBQUVGLGlEQUFpRDtBQUNqREEsT0FBT0M7QUFFUCxrQ0FBa0M7QUFDM0IsTUFBTUUsaUJBQWlCO0lBQzVCLElBQUk7UUFDRixNQUFNQyxTQUFTLE1BQU1KLEtBQUtLLE9BQU87UUFDakMsTUFBTUMsU0FBUyxNQUFNRixPQUFPRyxLQUFLLENBQUM7UUFDbENILE9BQU9JLE9BQU87UUFDZCxPQUFPO1lBQUVDLFNBQVM7WUFBTUMsV0FBV0osT0FBT0ssSUFBSSxDQUFDLEVBQUUsQ0FBQ0MsR0FBRztRQUFDO0lBQ3hELEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsOEJBQThCQTtRQUM1QyxPQUFPO1lBQUVKLFNBQVM7WUFBT0ksT0FBT0EsaUJBQWlCZCxRQUFRYyxNQUFNRSxPQUFPLEdBQUc7UUFBZ0I7SUFDM0Y7QUFDRixFQUFFO0FBRUYsMENBQTBDO0FBQ25DLGVBQWVSLE1BQ3BCUyxJQUFZLEVBQ1pDLE1BQWM7SUFFZCxJQUFJO1FBQ0YsTUFBTVgsU0FBUyxNQUFNTixLQUFLTyxLQUFLLENBQUNTLE1BQU1DO1FBQ3RDLE9BQU9YLE9BQU9LLElBQUk7SUFDcEIsRUFBRSxPQUFPRSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQkFBZ0JBO1FBQzlCLE1BQU1BO0lBQ1I7QUFDRjtBQUVBLCtCQUErQjtBQUN4QixNQUFNSyxpQkFBaUIsT0FBTy9CO0lBQ25DVCxRQUFRQyxHQUFHLENBQUNDLFNBQVMsR0FBR087SUFDeEJjO0lBQ0EsT0FBT0U7QUFDVCxFQUFFO0FBRUYsa0RBQWtEO0FBQzNDLE1BQU1nQixZQUFZO0lBQ3ZCLE1BQU1uQixLQUFLRSxHQUFHO0FBQ2hCLEVBQUU7QUFFRixpRUFBZUYsSUFBSUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3RlbXBsYXRlLTIvLi9zcmMvbGliL2RiLnRzPzllNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9vbCB9IGZyb20gJ3BnJztcblxuLy8gTG9hZCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbmNvbnN0IGdldERiQ29uZmlnID0gKCkgPT4ge1xuICBjb25zdCBhY3RpdmVEYiA9IHByb2Nlc3MuZW52LkFDVElWRV9EQiB8fCAnVUFUJztcbiAgXG4gIGlmIChhY3RpdmVEYiA9PT0gJ1VBVCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaG9zdDogcHJvY2Vzcy5lbnYuVUFUX0RCX0hPU1QsXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5VQVRfREJfVVNFUixcbiAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5VQVRfREJfUEFTU1dPUkQsXG4gICAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuVUFUX0RCX0RBVEFCQVNFLFxuICAgICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuVUFUX0RCX1BPUlQgfHwgJzU0MzInKSxcbiAgICAgIHNzbDoge1xuICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXG4gICAgICB9XG4gICAgfTtcbiAgfSBlbHNlIGlmIChhY3RpdmVEYiA9PT0gJ1BST0QnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QsXG4gICAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLFxuICAgICAgcGFzc3dvcmQ6IHByb2Nlc3MuZW52LkRCX1BBU1NXT1JELFxuICAgICAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX0RBVEFCQVNFLFxuICAgICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCB8fCAnNTQzMicpLFxuICAgICAgc3NsOiB7XG4gICAgICAgIHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2VcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIFxuICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZGF0YWJhc2UgY29uZmlndXJhdGlvbicpO1xufTtcblxuLy8gQ3JlYXRlIGEgcG9vbCB0aGF0IHdlJ2xsIHJldXNlXG5sZXQgcG9vbDogUG9vbDtcblxuLy8gSW5pdGlhbGl6ZSBvciByZWluaXRpYWxpemUgdGhlIHBvb2wgd2l0aCBuZXcgY29uZmlndXJhdGlvblxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVQb29sID0gKCkgPT4ge1xuICBpZiAocG9vbCkge1xuICAgIHBvb2wuZW5kKCk7IC8vIENsb3NlIGV4aXN0aW5nIGNvbm5lY3Rpb25zXG4gIH1cbiAgcG9vbCA9IG5ldyBQb29sKGdldERiQ29uZmlnKCkpO1xuICByZXR1cm4gcG9vbDtcbn07XG5cbi8vIEluaXRpYWxpemUgdGhlIHBvb2wgd2l0aCBkZWZhdWx0IGNvbmZpZ3VyYXRpb25cbnBvb2wgPSBpbml0aWFsaXplUG9vbCgpO1xuXG4vLyBUZXN0IHF1ZXJ5IHRvIHZlcmlmeSBjb25uZWN0aW9uXG5leHBvcnQgY29uc3QgdGVzdENvbm5lY3Rpb24gPSBhc3luYyAoKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KCdTRUxFQ1QgTk9XKCknKTtcbiAgICBjbGllbnQucmVsZWFzZSgpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHRpbWVzdGFtcDogcmVzdWx0LnJvd3NbMF0ubm93IH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyB9O1xuICB9XG59O1xuXG4vLyBHZW5lcmljIHF1ZXJ5IGZ1bmN0aW9uIHdpdGggdHlwZSBzYWZldHlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeTxUPihcbiAgdGV4dDogc3RyaW5nLFxuICBwYXJhbXM/OiBhbnlbXVxuKTogUHJvbWlzZTxUW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwb29sLnF1ZXJ5KHRleHQsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzIGFzIFRbXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdRdWVyeSBlcnJvcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gc3dpdGNoIGRhdGFiYXNlc1xuZXhwb3J0IGNvbnN0IHN3aXRjaERhdGFiYXNlID0gYXN5bmMgKGRhdGFiYXNlOiAnVUFUJyB8ICdQUk9EJykgPT4ge1xuICBwcm9jZXNzLmVudi5BQ1RJVkVfREIgPSBkYXRhYmFzZTtcbiAgaW5pdGlhbGl6ZVBvb2woKTtcbiAgcmV0dXJuIHRlc3RDb25uZWN0aW9uKCk7XG59O1xuXG4vLyBDbGVhbnVwIGZ1bmN0aW9uIGZvciB3aGVuIHRoZSBhcHBsaWNhdGlvbiBzdG9wc1xuZXhwb3J0IGNvbnN0IGNsb3NlUG9vbCA9IGFzeW5jICgpID0+IHtcbiAgYXdhaXQgcG9vbC5lbmQoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBvb2w7ICJdLCJuYW1lcyI6WyJQb29sIiwiZ2V0RGJDb25maWciLCJhY3RpdmVEYiIsInByb2Nlc3MiLCJlbnYiLCJBQ1RJVkVfREIiLCJob3N0IiwiVUFUX0RCX0hPU1QiLCJ1c2VyIiwiVUFUX0RCX1VTRVIiLCJwYXNzd29yZCIsIlVBVF9EQl9QQVNTV09SRCIsImRhdGFiYXNlIiwiVUFUX0RCX0RBVEFCQVNFIiwicG9ydCIsInBhcnNlSW50IiwiVUFUX0RCX1BPUlQiLCJzc2wiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJEQl9IT1NUIiwiREJfVVNFUiIsIkRCX1BBU1NXT1JEIiwiREJfREFUQUJBU0UiLCJEQl9QT1JUIiwiRXJyb3IiLCJwb29sIiwiaW5pdGlhbGl6ZVBvb2wiLCJlbmQiLCJ0ZXN0Q29ubmVjdGlvbiIsImNsaWVudCIsImNvbm5lY3QiLCJyZXN1bHQiLCJxdWVyeSIsInJlbGVhc2UiLCJzdWNjZXNzIiwidGltZXN0YW1wIiwicm93cyIsIm5vdyIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJ0ZXh0IiwicGFyYW1zIiwic3dpdGNoRGF0YWJhc2UiLCJjbG9zZVBvb2wiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/queries/valuable-moments.ts":
/*!*********************************************!*\
  !*** ./src/lib/queries/valuable-moments.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllValuableMoments: () => (/* binding */ getAllValuableMoments),\n/* harmony export */   getContentMetrics: () => (/* binding */ getContentMetrics),\n/* harmony export */   getEmailMetrics: () => (/* binding */ getEmailMetrics),\n/* harmony export */   getQuestionsMetrics: () => (/* binding */ getQuestionsMetrics),\n/* harmony export */   getSocialPostMetrics: () => (/* binding */ getSocialPostMetrics)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.ts\");\n\nasync function getEmailMetrics(businessIds, dateRange) {\n    const businessFilter = businessIds?.length ? \"AND u.id = ANY($3)\" : \"\";\n    return (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`SELECT \n      u.id as business_id,\n      u.business_name,\n      COUNT(e.id) as count\n    FROM users u\n    LEFT JOIN emails e ON e.business_id = u.id\n      AND e.created_on >= $1 \n      AND e.created_on <= $2\n    WHERE u.user_type = 'BUSINESS'\n      AND u.deleted IS NOT TRUE\n      AND u.active = TRUE\n      ${businessFilter}\n    GROUP BY u.id, u.business_name\n    ORDER BY u.business_name`, businessIds?.length ? [\n        dateRange.startDate,\n        dateRange.endDate,\n        businessIds\n    ] : [\n        dateRange.startDate,\n        dateRange.endDate\n    ]);\n}\nasync function getQuestionsMetrics(businessIds, dateRange) {\n    const businessFilter = businessIds?.length ? \"AND u.id = ANY($3)\" : \"\";\n    return (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`SELECT \n      u.id as business_id,\n      u.business_name,\n      COUNT(q.id) as count\n    FROM users u\n    LEFT JOIN questions q ON q.business_id = u.id\n      AND q.status = 'ANSWERED'\n      AND q.answer_date >= $1 \n      AND q.answer_date <= $2\n    WHERE u.user_type = 'BUSINESS'\n      AND u.deleted IS NOT TRUE\n      AND u.active = TRUE\n      ${businessFilter}\n    GROUP BY u.id, u.business_name\n    ORDER BY u.business_name`, businessIds?.length ? [\n        dateRange.startDate,\n        dateRange.endDate,\n        businessIds\n    ] : [\n        dateRange.startDate,\n        dateRange.endDate\n    ]);\n}\nasync function getSocialPostMetrics(businessIds, dateRange) {\n    const businessFilter = businessIds?.length ? \"AND u.id = ANY($3)\" : \"\";\n    return (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`SELECT \n      u.id as business_id,\n      u.business_name,\n      COUNT(sp.id) as count\n    FROM users u\n    LEFT JOIN social_post sp ON sp.business_id = u.id\n      AND sp.status = 'POSTED'\n      AND sp.created_on >= $1 \n      AND sp.created_on <= $2\n    WHERE u.user_type = 'BUSINESS'\n      AND u.deleted IS NOT TRUE\n      AND u.active = TRUE\n      ${businessFilter}\n    GROUP BY u.id, u.business_name\n    ORDER BY u.business_name`, businessIds?.length ? [\n        dateRange.startDate,\n        dateRange.endDate,\n        businessIds\n    ] : [\n        dateRange.startDate,\n        dateRange.endDate\n    ]);\n}\nasync function getContentMetrics(businessIds, dateRange) {\n    const businessFilter = businessIds?.length ? \"AND u.id = ANY($3)\" : \"\";\n    return (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(`SELECT \n      u.id as business_id,\n      u.business_name,\n      COUNT(cp.id) as count\n    FROM users u\n    LEFT JOIN content_page cp ON cp.business_id = u.id\n      AND cp.types IN ('PDF', 'YOUTUBE', 'CONTENT')\n      AND cp.created_on >= $1 \n      AND cp.created_on <= $2\n    WHERE u.user_type = 'BUSINESS'\n      AND u.deleted IS NOT TRUE\n      AND u.active = TRUE\n      ${businessFilter}\n    GROUP BY u.id, u.business_name\n    ORDER BY u.business_name`, businessIds?.length ? [\n        dateRange.startDate,\n        dateRange.endDate,\n        businessIds\n    ] : [\n        dateRange.startDate,\n        dateRange.endDate\n    ]);\n}\nasync function getAllValuableMoments(businessIds, dateRange) {\n    const [emails, questions, socialPosts, content] = await Promise.all([\n        getEmailMetrics(businessIds, dateRange),\n        getQuestionsMetrics(businessIds, dateRange),\n        getSocialPostMetrics(businessIds, dateRange),\n        getContentMetrics(businessIds, dateRange)\n    ]);\n    // Since we're now getting all businesses from each query,\n    // we can use any of the result sets as our base list of businesses\n    return emails.map((business)=>{\n        const questionData = questions.find((q)=>q.business_id === business.business_id);\n        const socialData = socialPosts.find((s)=>s.business_id === business.business_id);\n        const contentData = content.find((c)=>c.business_id === business.business_id);\n        return {\n            businessId: business.business_id,\n            businessName: business.business_name,\n            emailsSent: business.count || 0,\n            questionsAnswered: questionData?.count || 0,\n            socialPosts: socialData?.count || 0,\n            contentAdded: contentData?.count || 0\n        };\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3F1ZXJpZXMvdmFsdWFibGUtbW9tZW50cy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUM7QUFnQjFCLGVBQWVDLGdCQUFnQkMsV0FBNEIsRUFBRUMsU0FBb0I7SUFDdEYsTUFBTUMsaUJBQWlCRixhQUFhRyxTQUNoQyx1QkFDQTtJQUVKLE9BQU9MLDhDQUFLQSxDQUNWLENBQUM7Ozs7Ozs7Ozs7O01BV0MsRUFBRUksZUFBZTs7NEJBRUssQ0FBQyxFQUN6QkYsYUFBYUcsU0FDVDtRQUFDRixVQUFVRyxTQUFTO1FBQUVILFVBQVVJLE9BQU87UUFBRUw7S0FBWSxHQUNyRDtRQUFDQyxVQUFVRyxTQUFTO1FBQUVILFVBQVVJLE9BQU87S0FBQztBQUVoRDtBQUVPLGVBQWVDLG9CQUFvQk4sV0FBNEIsRUFBRUMsU0FBb0I7SUFDMUYsTUFBTUMsaUJBQWlCRixhQUFhRyxTQUNoQyx1QkFDQTtJQUVKLE9BQU9MLDhDQUFLQSxDQUNWLENBQUM7Ozs7Ozs7Ozs7OztNQVlDLEVBQUVJLGVBQWU7OzRCQUVLLENBQUMsRUFDekJGLGFBQWFHLFNBQ1Q7UUFBQ0YsVUFBVUcsU0FBUztRQUFFSCxVQUFVSSxPQUFPO1FBQUVMO0tBQVksR0FDckQ7UUFBQ0MsVUFBVUcsU0FBUztRQUFFSCxVQUFVSSxPQUFPO0tBQUM7QUFFaEQ7QUFFTyxlQUFlRSxxQkFBcUJQLFdBQTRCLEVBQUVDLFNBQW9CO0lBQzNGLE1BQU1DLGlCQUFpQkYsYUFBYUcsU0FDaEMsdUJBQ0E7SUFFSixPQUFPTCw4Q0FBS0EsQ0FDVixDQUFDOzs7Ozs7Ozs7Ozs7TUFZQyxFQUFFSSxlQUFlOzs0QkFFSyxDQUFDLEVBQ3pCRixhQUFhRyxTQUNUO1FBQUNGLFVBQVVHLFNBQVM7UUFBRUgsVUFBVUksT0FBTztRQUFFTDtLQUFZLEdBQ3JEO1FBQUNDLFVBQVVHLFNBQVM7UUFBRUgsVUFBVUksT0FBTztLQUFDO0FBRWhEO0FBRU8sZUFBZUcsa0JBQWtCUixXQUE0QixFQUFFQyxTQUFvQjtJQUN4RixNQUFNQyxpQkFBaUJGLGFBQWFHLFNBQ2hDLHVCQUNBO0lBRUosT0FBT0wsOENBQUtBLENBQ1YsQ0FBQzs7Ozs7Ozs7Ozs7O01BWUMsRUFBRUksZUFBZTs7NEJBRUssQ0FBQyxFQUN6QkYsYUFBYUcsU0FDVDtRQUFDRixVQUFVRyxTQUFTO1FBQUVILFVBQVVJLE9BQU87UUFBRUw7S0FBWSxHQUNyRDtRQUFDQyxVQUFVRyxTQUFTO1FBQUVILFVBQVVJLE9BQU87S0FBQztBQUVoRDtBQUVPLGVBQWVJLHNCQUFzQlQsV0FBNEIsRUFBRUMsU0FBb0I7SUFDNUYsTUFBTSxDQUFDUyxRQUFRQyxXQUFXQyxhQUFhQyxRQUFRLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQ2xFaEIsZ0JBQWdCQyxhQUFhQztRQUM3Qkssb0JBQW9CTixhQUFhQztRQUNqQ00scUJBQXFCUCxhQUFhQztRQUNsQ08sa0JBQWtCUixhQUFhQztLQUNoQztJQUVELDBEQUEwRDtJQUMxRCxtRUFBbUU7SUFDbkUsT0FBT1MsT0FBT00sR0FBRyxDQUFDQyxDQUFBQTtRQUNoQixNQUFNQyxlQUFlUCxVQUFVUSxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLFdBQVcsS0FBS0osU0FBU0ksV0FBVztRQUMvRSxNQUFNQyxhQUFhVixZQUFZTyxJQUFJLENBQUNJLENBQUFBLElBQUtBLEVBQUVGLFdBQVcsS0FBS0osU0FBU0ksV0FBVztRQUMvRSxNQUFNRyxjQUFjWCxRQUFRTSxJQUFJLENBQUNNLENBQUFBLElBQUtBLEVBQUVKLFdBQVcsS0FBS0osU0FBU0ksV0FBVztRQUU1RSxPQUFPO1lBQ0xLLFlBQVlULFNBQVNJLFdBQVc7WUFDaENNLGNBQWNWLFNBQVNXLGFBQWE7WUFDcENDLFlBQVlaLFNBQVNhLEtBQUssSUFBSTtZQUM5QkMsbUJBQW1CYixjQUFjWSxTQUFTO1lBQzFDbEIsYUFBYVUsWUFBWVEsU0FBUztZQUNsQ0UsY0FBY1IsYUFBYU0sU0FBUztRQUN0QztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1wbGF0ZS0yLy4vc3JjL2xpYi9xdWVyaWVzL3ZhbHVhYmxlLW1vbWVudHMudHM/MWY4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBxdWVyeSB9IGZyb20gJ0AvbGliL2RiJztcblxuZXhwb3J0IGludGVyZmFjZSBWYWx1YWJsZU1vbWVudE1ldHJpY3Mge1xuICBidXNpbmVzc0lkOiBudW1iZXI7XG4gIGJ1c2luZXNzTmFtZTogc3RyaW5nO1xuICBlbWFpbHNTZW50OiBudW1iZXI7XG4gIHF1ZXN0aW9uc0Fuc3dlcmVkOiBudW1iZXI7XG4gIHNvY2lhbFBvc3RzOiBudW1iZXI7XG4gIGNvbnRlbnRBZGRlZDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIERhdGVSYW5nZSB7XG4gIHN0YXJ0RGF0ZTogRGF0ZTtcbiAgZW5kRGF0ZTogRGF0ZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVtYWlsTWV0cmljcyhidXNpbmVzc0lkczogbnVtYmVyW10gfCBudWxsLCBkYXRlUmFuZ2U6IERhdGVSYW5nZSkge1xuICBjb25zdCBidXNpbmVzc0ZpbHRlciA9IGJ1c2luZXNzSWRzPy5sZW5ndGggXG4gICAgPyAnQU5EIHUuaWQgPSBBTlkoJDMpJ1xuICAgIDogJyc7XG4gIFxuICByZXR1cm4gcXVlcnk8eyBidXNpbmVzc19pZDogbnVtYmVyOyBidXNpbmVzc19uYW1lOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT4oXG4gICAgYFNFTEVDVCBcbiAgICAgIHUuaWQgYXMgYnVzaW5lc3NfaWQsXG4gICAgICB1LmJ1c2luZXNzX25hbWUsXG4gICAgICBDT1VOVChlLmlkKSBhcyBjb3VudFxuICAgIEZST00gdXNlcnMgdVxuICAgIExFRlQgSk9JTiBlbWFpbHMgZSBPTiBlLmJ1c2luZXNzX2lkID0gdS5pZFxuICAgICAgQU5EIGUuY3JlYXRlZF9vbiA+PSAkMSBcbiAgICAgIEFORCBlLmNyZWF0ZWRfb24gPD0gJDJcbiAgICBXSEVSRSB1LnVzZXJfdHlwZSA9ICdCVVNJTkVTUydcbiAgICAgIEFORCB1LmRlbGV0ZWQgSVMgTk9UIFRSVUVcbiAgICAgIEFORCB1LmFjdGl2ZSA9IFRSVUVcbiAgICAgICR7YnVzaW5lc3NGaWx0ZXJ9XG4gICAgR1JPVVAgQlkgdS5pZCwgdS5idXNpbmVzc19uYW1lXG4gICAgT1JERVIgQlkgdS5idXNpbmVzc19uYW1lYCxcbiAgICBidXNpbmVzc0lkcz8ubGVuZ3RoIFxuICAgICAgPyBbZGF0ZVJhbmdlLnN0YXJ0RGF0ZSwgZGF0ZVJhbmdlLmVuZERhdGUsIGJ1c2luZXNzSWRzXVxuICAgICAgOiBbZGF0ZVJhbmdlLnN0YXJ0RGF0ZSwgZGF0ZVJhbmdlLmVuZERhdGVdXG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRRdWVzdGlvbnNNZXRyaWNzKGJ1c2luZXNzSWRzOiBudW1iZXJbXSB8IG51bGwsIGRhdGVSYW5nZTogRGF0ZVJhbmdlKSB7XG4gIGNvbnN0IGJ1c2luZXNzRmlsdGVyID0gYnVzaW5lc3NJZHM/Lmxlbmd0aCBcbiAgICA/ICdBTkQgdS5pZCA9IEFOWSgkMyknXG4gICAgOiAnJztcblxuICByZXR1cm4gcXVlcnk8eyBidXNpbmVzc19pZDogbnVtYmVyOyBidXNpbmVzc19uYW1lOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT4oXG4gICAgYFNFTEVDVCBcbiAgICAgIHUuaWQgYXMgYnVzaW5lc3NfaWQsXG4gICAgICB1LmJ1c2luZXNzX25hbWUsXG4gICAgICBDT1VOVChxLmlkKSBhcyBjb3VudFxuICAgIEZST00gdXNlcnMgdVxuICAgIExFRlQgSk9JTiBxdWVzdGlvbnMgcSBPTiBxLmJ1c2luZXNzX2lkID0gdS5pZFxuICAgICAgQU5EIHEuc3RhdHVzID0gJ0FOU1dFUkVEJ1xuICAgICAgQU5EIHEuYW5zd2VyX2RhdGUgPj0gJDEgXG4gICAgICBBTkQgcS5hbnN3ZXJfZGF0ZSA8PSAkMlxuICAgIFdIRVJFIHUudXNlcl90eXBlID0gJ0JVU0lORVNTJ1xuICAgICAgQU5EIHUuZGVsZXRlZCBJUyBOT1QgVFJVRVxuICAgICAgQU5EIHUuYWN0aXZlID0gVFJVRVxuICAgICAgJHtidXNpbmVzc0ZpbHRlcn1cbiAgICBHUk9VUCBCWSB1LmlkLCB1LmJ1c2luZXNzX25hbWVcbiAgICBPUkRFUiBCWSB1LmJ1c2luZXNzX25hbWVgLFxuICAgIGJ1c2luZXNzSWRzPy5sZW5ndGggXG4gICAgICA/IFtkYXRlUmFuZ2Uuc3RhcnREYXRlLCBkYXRlUmFuZ2UuZW5kRGF0ZSwgYnVzaW5lc3NJZHNdXG4gICAgICA6IFtkYXRlUmFuZ2Uuc3RhcnREYXRlLCBkYXRlUmFuZ2UuZW5kRGF0ZV1cbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFNvY2lhbFBvc3RNZXRyaWNzKGJ1c2luZXNzSWRzOiBudW1iZXJbXSB8IG51bGwsIGRhdGVSYW5nZTogRGF0ZVJhbmdlKSB7XG4gIGNvbnN0IGJ1c2luZXNzRmlsdGVyID0gYnVzaW5lc3NJZHM/Lmxlbmd0aCBcbiAgICA/ICdBTkQgdS5pZCA9IEFOWSgkMyknXG4gICAgOiAnJztcblxuICByZXR1cm4gcXVlcnk8eyBidXNpbmVzc19pZDogbnVtYmVyOyBidXNpbmVzc19uYW1lOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfT4oXG4gICAgYFNFTEVDVCBcbiAgICAgIHUuaWQgYXMgYnVzaW5lc3NfaWQsXG4gICAgICB1LmJ1c2luZXNzX25hbWUsXG4gICAgICBDT1VOVChzcC5pZCkgYXMgY291bnRcbiAgICBGUk9NIHVzZXJzIHVcbiAgICBMRUZUIEpPSU4gc29jaWFsX3Bvc3Qgc3AgT04gc3AuYnVzaW5lc3NfaWQgPSB1LmlkXG4gICAgICBBTkQgc3Auc3RhdHVzID0gJ1BPU1RFRCdcbiAgICAgIEFORCBzcC5jcmVhdGVkX29uID49ICQxIFxuICAgICAgQU5EIHNwLmNyZWF0ZWRfb24gPD0gJDJcbiAgICBXSEVSRSB1LnVzZXJfdHlwZSA9ICdCVVNJTkVTUydcbiAgICAgIEFORCB1LmRlbGV0ZWQgSVMgTk9UIFRSVUVcbiAgICAgIEFORCB1LmFjdGl2ZSA9IFRSVUVcbiAgICAgICR7YnVzaW5lc3NGaWx0ZXJ9XG4gICAgR1JPVVAgQlkgdS5pZCwgdS5idXNpbmVzc19uYW1lXG4gICAgT1JERVIgQlkgdS5idXNpbmVzc19uYW1lYCxcbiAgICBidXNpbmVzc0lkcz8ubGVuZ3RoIFxuICAgICAgPyBbZGF0ZVJhbmdlLnN0YXJ0RGF0ZSwgZGF0ZVJhbmdlLmVuZERhdGUsIGJ1c2luZXNzSWRzXVxuICAgICAgOiBbZGF0ZVJhbmdlLnN0YXJ0RGF0ZSwgZGF0ZVJhbmdlLmVuZERhdGVdXG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb250ZW50TWV0cmljcyhidXNpbmVzc0lkczogbnVtYmVyW10gfCBudWxsLCBkYXRlUmFuZ2U6IERhdGVSYW5nZSkge1xuICBjb25zdCBidXNpbmVzc0ZpbHRlciA9IGJ1c2luZXNzSWRzPy5sZW5ndGggXG4gICAgPyAnQU5EIHUuaWQgPSBBTlkoJDMpJ1xuICAgIDogJyc7XG5cbiAgcmV0dXJuIHF1ZXJ5PHsgYnVzaW5lc3NfaWQ6IG51bWJlcjsgYnVzaW5lc3NfbmFtZTogc3RyaW5nOyBjb3VudDogbnVtYmVyIH0+KFxuICAgIGBTRUxFQ1QgXG4gICAgICB1LmlkIGFzIGJ1c2luZXNzX2lkLFxuICAgICAgdS5idXNpbmVzc19uYW1lLFxuICAgICAgQ09VTlQoY3AuaWQpIGFzIGNvdW50XG4gICAgRlJPTSB1c2VycyB1XG4gICAgTEVGVCBKT0lOIGNvbnRlbnRfcGFnZSBjcCBPTiBjcC5idXNpbmVzc19pZCA9IHUuaWRcbiAgICAgIEFORCBjcC50eXBlcyBJTiAoJ1BERicsICdZT1VUVUJFJywgJ0NPTlRFTlQnKVxuICAgICAgQU5EIGNwLmNyZWF0ZWRfb24gPj0gJDEgXG4gICAgICBBTkQgY3AuY3JlYXRlZF9vbiA8PSAkMlxuICAgIFdIRVJFIHUudXNlcl90eXBlID0gJ0JVU0lORVNTJ1xuICAgICAgQU5EIHUuZGVsZXRlZCBJUyBOT1QgVFJVRVxuICAgICAgQU5EIHUuYWN0aXZlID0gVFJVRVxuICAgICAgJHtidXNpbmVzc0ZpbHRlcn1cbiAgICBHUk9VUCBCWSB1LmlkLCB1LmJ1c2luZXNzX25hbWVcbiAgICBPUkRFUiBCWSB1LmJ1c2luZXNzX25hbWVgLFxuICAgIGJ1c2luZXNzSWRzPy5sZW5ndGggXG4gICAgICA/IFtkYXRlUmFuZ2Uuc3RhcnREYXRlLCBkYXRlUmFuZ2UuZW5kRGF0ZSwgYnVzaW5lc3NJZHNdXG4gICAgICA6IFtkYXRlUmFuZ2Uuc3RhcnREYXRlLCBkYXRlUmFuZ2UuZW5kRGF0ZV1cbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFZhbHVhYmxlTW9tZW50cyhidXNpbmVzc0lkczogbnVtYmVyW10gfCBudWxsLCBkYXRlUmFuZ2U6IERhdGVSYW5nZSk6IFByb21pc2U8VmFsdWFibGVNb21lbnRNZXRyaWNzW10+IHtcbiAgY29uc3QgW2VtYWlscywgcXVlc3Rpb25zLCBzb2NpYWxQb3N0cywgY29udGVudF0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0RW1haWxNZXRyaWNzKGJ1c2luZXNzSWRzLCBkYXRlUmFuZ2UpLFxuICAgIGdldFF1ZXN0aW9uc01ldHJpY3MoYnVzaW5lc3NJZHMsIGRhdGVSYW5nZSksXG4gICAgZ2V0U29jaWFsUG9zdE1ldHJpY3MoYnVzaW5lc3NJZHMsIGRhdGVSYW5nZSksXG4gICAgZ2V0Q29udGVudE1ldHJpY3MoYnVzaW5lc3NJZHMsIGRhdGVSYW5nZSlcbiAgXSk7XG5cbiAgLy8gU2luY2Ugd2UncmUgbm93IGdldHRpbmcgYWxsIGJ1c2luZXNzZXMgZnJvbSBlYWNoIHF1ZXJ5LFxuICAvLyB3ZSBjYW4gdXNlIGFueSBvZiB0aGUgcmVzdWx0IHNldHMgYXMgb3VyIGJhc2UgbGlzdCBvZiBidXNpbmVzc2VzXG4gIHJldHVybiBlbWFpbHMubWFwKGJ1c2luZXNzID0+IHtcbiAgICBjb25zdCBxdWVzdGlvbkRhdGEgPSBxdWVzdGlvbnMuZmluZChxID0+IHEuYnVzaW5lc3NfaWQgPT09IGJ1c2luZXNzLmJ1c2luZXNzX2lkKTtcbiAgICBjb25zdCBzb2NpYWxEYXRhID0gc29jaWFsUG9zdHMuZmluZChzID0+IHMuYnVzaW5lc3NfaWQgPT09IGJ1c2luZXNzLmJ1c2luZXNzX2lkKTtcbiAgICBjb25zdCBjb250ZW50RGF0YSA9IGNvbnRlbnQuZmluZChjID0+IGMuYnVzaW5lc3NfaWQgPT09IGJ1c2luZXNzLmJ1c2luZXNzX2lkKTtcblxuICAgIHJldHVybiB7XG4gICAgICBidXNpbmVzc0lkOiBidXNpbmVzcy5idXNpbmVzc19pZCxcbiAgICAgIGJ1c2luZXNzTmFtZTogYnVzaW5lc3MuYnVzaW5lc3NfbmFtZSxcbiAgICAgIGVtYWlsc1NlbnQ6IGJ1c2luZXNzLmNvdW50IHx8IDAsXG4gICAgICBxdWVzdGlvbnNBbnN3ZXJlZDogcXVlc3Rpb25EYXRhPy5jb3VudCB8fCAwLFxuICAgICAgc29jaWFsUG9zdHM6IHNvY2lhbERhdGE/LmNvdW50IHx8IDAsXG4gICAgICBjb250ZW50QWRkZWQ6IGNvbnRlbnREYXRhPy5jb3VudCB8fCAwXG4gICAgfTtcbiAgfSk7XG59ICJdLCJuYW1lcyI6WyJxdWVyeSIsImdldEVtYWlsTWV0cmljcyIsImJ1c2luZXNzSWRzIiwiZGF0ZVJhbmdlIiwiYnVzaW5lc3NGaWx0ZXIiLCJsZW5ndGgiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiZ2V0UXVlc3Rpb25zTWV0cmljcyIsImdldFNvY2lhbFBvc3RNZXRyaWNzIiwiZ2V0Q29udGVudE1ldHJpY3MiLCJnZXRBbGxWYWx1YWJsZU1vbWVudHMiLCJlbWFpbHMiLCJxdWVzdGlvbnMiLCJzb2NpYWxQb3N0cyIsImNvbnRlbnQiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiYnVzaW5lc3MiLCJxdWVzdGlvbkRhdGEiLCJmaW5kIiwicSIsImJ1c2luZXNzX2lkIiwic29jaWFsRGF0YSIsInMiLCJjb250ZW50RGF0YSIsImMiLCJidXNpbmVzc0lkIiwiYnVzaW5lc3NOYW1lIiwiYnVzaW5lc3NfbmFtZSIsImVtYWlsc1NlbnQiLCJjb3VudCIsInF1ZXN0aW9uc0Fuc3dlcmVkIiwiY29udGVudEFkZGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/queries/valuable-moments.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/date-fns"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvaluable-moments%2Froute&page=%2Fapi%2Fvaluable-moments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvaluable-moments%2Froute.ts&appDir=%2FUsers%2Fjason%2FDocuments%2FProjects%2FRelait-Dashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjason%2FDocuments%2FProjects%2FRelait-Dashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();